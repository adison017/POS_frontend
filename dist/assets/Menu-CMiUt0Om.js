import{r as n,j as e,y as s}from"./index-C7VodmU4.js";import{getAllMenuCategories as re,getAllMenuItems as se,updateMenuCategory as U,updateMenuItem as O,deleteMenuCategory as ae,deleteMenuItem as le,createMenuCategory as oe,createMenuItem as ie}from"./dataService-DioIbMCu.js";import{u as ne}from"./supabaseStorageService-y_6U3XtY.js";import"./apiClient-CgrKIHeM.js";const ue=()=>{const[x,p]=n.useState([]),[w,b]=n.useState([]),[A,v]=n.useState(!1),[R,N]=n.useState(!1),[z,g]=n.useState(!1),[u,h]=n.useState(!1),[S,f]=n.useState(null),[I,k]=n.useState(""),[E,_]=n.useState(null),[D,y]=n.useState(""),[F,C]=n.useState(!1),[d,M]=n.useState({id:null,name:"",type:""}),[j,W]=n.useState("all"),[L,q]=n.useState(""),[a,c]=n.useState({category_id:"",name:"",price:"",cost_default:"",image_url:"",image_file:null,image_preview:null});n.useEffect(()=>{(async()=>{try{const[r,l]=await Promise.all([re(),se()]);p(r),b(l)}catch(r){console.error("Error loading menu data:",r)}})()},[]);const P=async t=>{try{const r=x.find(l=>l.id===t);if(r){const l={is_active:!r.is_active};(await U(t,l)).error?s.error("ไม่สามารถอัปเดตสถานะหมวดหมู่ได้"):(p(o=>o.map(i=>i.id===t?{...i,is_active:!i.is_active}:i)),s.success(`อัปเดตสถานะหมวดหมู่ "${r.name}" แล้ว`))}}catch(r){console.error("Error toggling category status:",r),s.error("เกิดข้อผิดพลาดในการอัปเดตสถานะหมวดหมู่")}},V=async(t,r)=>{M({id:t,name:r,type:"category"}),C(!0)},G=async(t,r)=>{M({id:t,name:r,type:"menu"}),C(!0)},T=async()=>{try{if(d.type==="category"){const t=await ae(d.id);t.error?s.error(t.error||"ไม่สามารถลบหมวดหมู่ได้"):(p(r=>r.filter(l=>l.id!==d.id)),s.success(`ลบหมวดหมู่ "${d.name}" แล้ว`))}else if(d.type==="menu"){const t=await le(d.id);t.error?s.error(t.error||"ไม่สามารถลบเมนูได้"):(b(r=>r.filter(l=>l.id!==d.id)),s.success(`ลบเมนู "${d.name}" แล้ว`))}}catch(t){console.error("Error deleting item:",t),t.message.includes("foreign key constraint")?s.error("ไม่สามารถลบได้ เนื่องจากมีเมนูอาหารในหมวดหมู่นี้ กรุณาย้ายเมนูออกก่อน"):s.error(t.message||`เกิดข้อผิดพลาดในการลบ ${d.type==="category"?"หมวดหมู่":"เมนู"}`)}finally{C(!1),M({id:null,name:"",type:""})}},J=async t=>{try{const r=w.find(l=>l.id===t);if(r){const l={is_active:!r.is_active};(await O(t,l)).error?s.error("ไม่สามารถอัปเดตสถานะเมนูได้"):(b(o=>o.map(i=>i.id===t?{...i,is_active:!i.is_active}:i)),s.success(`อัปเดตสถานะเมนู "${r.name}" แล้ว`))}}catch(r){console.error("Error toggling menu item status:",r),s.error("เกิดข้อผิดพลาดในการอัปเดตสถานะเมนู")}},K=async t=>{if(t.preventDefault(),I.trim())try{const r={id:`cat_${Date.now()}`,name:I,display_order:x.length+1,is_active:!0,branch_id:"branch1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},l=await oe(r);l.error?s.error("ไม่สามารถเพิ่มหมวดหมู่ได้"):(p([...x,l.data]),k(""),v(!1),s.success("เพิ่มหมวดหมู่ใหม่เรียบร้อยแล้ว"))}catch(r){console.error("Error creating category:",r),s.error("เกิดข้อผิดพลาดในการเพิ่มหมวดหมู่")}},Q=t=>{_(t.id),y(t.name||""),N(!0)},X=async t=>{if(t.preventDefault(),!(!E||!D.trim()))try{const r={name:D.trim(),updated_at:new Date().toISOString()},l=await U(E,r);l.error?s.error("ไม่สามารถอัปเดตหมวดหมู่ได้"):(p(m=>m.map(o=>o.id===E?{...o,...l.data}:o)),s.success("อัปเดตหมวดหมู่เรียบร้อยแล้ว"),N(!1),_(null),y(""))}catch(r){console.error("Error updating category:",r),s.error("เกิดข้อผิดพลาดในการอัปเดตหมวดหมู่")}},Y=t=>{h(!0),f(t.id),c({category_id:t.category_id||"",name:t.name||"",price:t.price||"",cost_default:t.cost_default||"",image_url:t.image_url||"",image_file:null,image_preview:null}),g(!0)},Z=t=>{const r=t.target.files[0];if(!r)return;if(!r.type.startsWith("image/")){s.error("กรุณาเลือกไฟล์รูปภาพเท่านั้น");return}if(r.size>5*1024*1024){s.error("ขนาดไฟล์ต้องไม่เกิน 5MB");return}const l=URL.createObjectURL(r);c({...a,image_file:r,image_preview:l,image_url:""}),s.info("ไฟล์รูปภาพถูกเลือกแล้ว จะอัปโหลดเมื่อบันทึก")},ee=async t=>{if(t.preventDefault(),a.category_id&&a.name&&a.price)try{let r=a.image_url;a.image_file&&(s.info("กำลังอัปโหลดรูปภาพ..."),r=(await ne(a.image_file,"pos_menu_items")).publicUrl,s.success("อัปโหลดรูปภาพเรียบร้อยแล้ว"));const l={id:u?S:`menu_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category_id:a.category_id,name:a.name,price:parseFloat(a.price),cost_default:parseFloat(a.cost_default)||0,image_url:r,is_active:!0,branch_id:"branch1",created_at:u?void 0:new Date().toISOString(),updated_at:new Date().toISOString()};let m;if(u){const o={...l};delete o.id,delete o.created_at,m=await O(S,o)}else m=await ie(l);m.error?s.error(u?"ไม่สามารถอัปเดตเมนูได้":"ไม่สามารถเพิ่มเมนูได้"):(u?(b(o=>o.map(i=>i.id===S?{...m.data}:i)),s.success("อัปเดตเมนูเรียบร้อยแล้ว")):(b([...w,m.data]),s.success("เพิ่มเมนูใหม่เรียบร้อยแล้ว")),a.image_preview&&URL.revokeObjectURL(a.image_preview),c({category_id:"",name:"",price:"",cost_default:"",image_url:"",image_file:null,image_preview:null}),h(!1),f(null),g(!1))}catch(r){console.error("Error saving menu item:",r),r.message.includes("permissions")?s.error("ไม่สามารถอัปโหลดรูปภาพได้: "+r.message):s.error(u?"เกิดข้อผิดพลาดในการอัปเดตเมนู":"เกิดข้อผิดพลาดในการเพิ่มเมนู")}},te=t=>`฿${t.toFixed(2)}`,B=n.useMemo(()=>{let t=w;if(j!=="all"&&(t=t.filter(r=>r.category_id===j)),L){const r=L.toLowerCase();t=t.filter(l=>l.name.toLowerCase().includes(r))}return t},[w,j,L]);return e.jsx("div",{id:"menuSection",className:"p-4 md:p-6 w-full h-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"จัดการเมนู"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>v(!0),className:"bg-indigo-500 hover:bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{className:"whitespace-nowrap",children:"เพิ่มหมวดหมู่"})]}),e.jsxs("button",{onClick:()=>{h(!1),f(null),c({category_id:"",name:"",description:"",price:"",cost_default:"",image_url:""}),g(!0)},className:"bg-emerald-500 hover:bg-emerald-600 text-white px-5 py-3 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{className:"whitespace-nowrap",children:"เพิ่มเมนู"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ค้นหาเมนู"}),e.jsx("input",{type:"text",value:L,onChange:t=>q(t.target.value),placeholder:"ค้นหาชื่อเมนู...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"กรองตามหมวดหมู่"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>W("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${j==="all"?"bg-indigo-500 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`,children:"ทั้งหมด"}),x.map(t=>e.jsx("button",{onClick:()=>W(t.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${j===t.id?"bg-indigo-500 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`,children:t.name},t.id))]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"หมวดหมู่เมนู"}),e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-2.5 py-1 rounded-full",children:[x.length," หมวดหมู่"]})]}),e.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto max-h-[calc(50vh-100px)] md:max-h-[calc(100vh-300px)]",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-3",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"ยังไม่มีหมวดหมู่เมนู"}),e.jsxs("button",{onClick:()=>v(!0),className:"mt-3 text-indigo-600 hover:text-indigo-800 font-medium flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มหมวดหมู่แรกของคุณ"]})]}):x.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl hover:bg-gray-100 transition-colors ${t.is_active?"bg-gray-50":"bg-gray-100 opacity-70"}`,children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h4",{className:`font-bold ${t.is_active?"text-gray-800":"text-gray-500"} truncate`,children:[t.name," ",t.is_active?"":"(ปิด)"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ลำดับ: ",t.display_order]})]}),e.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 ml-2",children:[e.jsx("button",{onClick:()=>Q(t),className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"แก้ไขหมวดหมู่",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>V(t.id,t.name),className:"p-2 text-gray-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"ลบหมวดหมู่",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("button",{onClick:()=>P(t.id),className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs font-bold transition-colors whitespace-nowrap ${t.is_active?"bg-emerald-100 text-emerald-800 hover:bg-emerald-200":"bg-rose-100 text-rose-800 hover:bg-rose-200"}`,children:t.is_active?"เปิด":"ปิด"})]})]},t.id))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"รายการเมนู"}),e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-2.5 py-1 rounded-full",children:[B.length," เมนู"]})]}),e.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto max-h-[calc(50vh-100px)] md:max-h-[calc(100vh-300px)]",children:B.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-3",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"ยังไม่มีรายการเมนู"}),e.jsxs("button",{onClick:()=>{h(!1),f(null),c({category_id:"",name:"",description:"",price:"",cost_default:"",image_url:""}),g(!0)},className:"mt-3 text-indigo-600 hover:text-indigo-800 font-medium flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มเมนูแรกของคุณ"]})]}):B.map(t=>{const r=x.find(o=>o.id===t.category_id),m=(o=>{if(!o)return"bg-gray-200 text-gray-800";let i=0;for(let $=0;$<o.length;$++)i=o.charCodeAt($)+((i<<5)-i);const H=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-indigo-100 text-indigo-800","bg-red-100 text-red-800","bg-teal-100 text-teal-800"];return H[Math.abs(i)%H.length]})(t.category_id);return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl hover:bg-gray-100 transition-colors ${t.is_active?"bg-gray-50":"bg-gray-100 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-12 h-12 object-cover rounded-lg mr-3 flex-shrink-0"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg mr-3 flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h4",{className:`font-bold ${t.is_active?"text-gray-800":"text-gray-500"} truncate`,children:[t.name," ",t.is_active?"":"(ปิด)"]}),e.jsx("p",{className:`text-xs font-medium mt-1 inline-flex items-center px-2.5 py-0.5 rounded-full ${m}`,children:r?.name||"ไม่มีหมวดหมู่"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 mt-1",children:te(t.price)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 ml-2",children:[e.jsx("button",{onClick:()=>Y(t),className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"แก้ไข",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>G(t.id,t.name),className:"p-2 text-gray-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"ลบ",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("button",{onClick:()=>J(t.id),className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs font-bold transition-colors whitespace-nowrap ${t.is_active?"bg-emerald-100 text-emerald-800 hover:bg-emerald-200":"bg-rose-100 text-rose-800 hover:bg-rose-200"}`,children:t.is_active?"เปิด":"ปิด"})]})]},t.id)})})]})]}),F&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-10 w-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mt-4",children:["ยืนยันการลบ ",d.type==="category"?"หมวดหมู่":"เมนู"]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-gray-600",children:["คุณแน่ใจหรือไม่ที่ต้องการลบ ",e.jsxs("span",{className:"font-bold",children:['"',d.name,'"']}),"?"]}),d.type==="category"&&e.jsx("p",{className:"text-sm text-amber-600 mt-2 bg-amber-50 p-2 rounded-lg",children:"คำเตือน: หากยังมีเมนูอาหารในหมวดหมู่นี้ คุณจะไม่สามารถลบหมวดหมู่ได้"})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),M({id:null,name:"",type:""})},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-bold hover:bg-gray-200 transition-colors duration-200",children:"ยกเลิก"}),e.jsx("button",{type:"button",onClick:T,className:"flex-1 py-3 px-4 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold transition-all duration-200 shadow hover:shadow-md",children:"ลบ"})]})]})}),A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"เพิ่มหมวดหมู่ใหม่"}),e.jsx("button",{onClick:()=>{v(!1),k("")},className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:K,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อหมวดหมู่"}),e.jsx("input",{type:"text",value:I,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"เช่น อาหารจานเดียว, ของหวาน",required:!0})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),k("")},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-bold hover:bg-gray-200 transition-colors duration-200",children:"ยกเลิก"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg font-bold transition-all duration-200 shadow hover:shadow-md",children:"บันทึก"})]})]})]})}),R&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"แก้ไขหมวดหมู่"}),e.jsx("button",{onClick:()=>{N(!1),_(null),y("")},className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อหมวดหมู่"}),e.jsx("input",{type:"text",value:D,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"เช่น อาหารจานเดียว, ของหวาน",required:!0})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),_(null),y("")},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-bold hover:bg-gray-200 transition-colors duration-200",children:"ยกเลิก"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg font-bold transition-all duration-200 shadow hover:shadow-md",children:"บันทึก"})]})]})]})}),z&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:u?"แก้ไขเมนู":"เพิ่มเมนูใหม่"}),e.jsx("button",{onClick:()=>{g(!1),h(!1),f(null),c({category_id:"",name:"",description:"",price:"",cost_default:"",image_url:"",image_file:null,image_preview:null})},className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:ee,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"หมวดหมู่"}),e.jsxs("select",{value:a.category_id,onChange:t=>c({...a,category_id:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อเมนู"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>c({...a,name:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ราคา"}),e.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:t=>c({...a,price:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ต้นทุน"}),e.jsx("input",{type:"number",step:"0.01",value:a.cost_default,onChange:t=>c({...a,cost_default:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"รูปภาพ"}),a.image_preview?e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:a.image_preview,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-200"})}):a.image_url?e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:a.image_url,alt:"Existing",className:"w-32 h-32 object-cover rounded-lg border border-gray-200"})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-2",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"ยังไม่ได้อัปโหลดรูปภาพ"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:Z,className:"w-full py-2 px-4 border border-gray-300 rounded-lg text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"รองรับไฟล์ JPG, PNG หรือ GIF (สูงสุด 5MB)"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{a.image_preview&&URL.revokeObjectURL(a.image_preview),g(!1),h(!1),f(null),c({category_id:"",name:"",price:"",cost_default:"",image_url:"",image_file:null,image_preview:null})},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-bold hover:bg-gray-200 transition-colors duration-200",children:"ยกเลิก"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-bold transition-all duration-200 shadow hover:shadow-md",children:u?"อัปเดต":"บันทึก"})]})]})]})})]})})};export{ue as default};
